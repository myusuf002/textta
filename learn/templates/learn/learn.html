{% extends 'base.html' %} 
{% load static %}

{% block css %}
{% endblock %}

{% block content %}


<div class="container">
    <div class="row py-3">
        <div class="col-md-12 mt-3 text-center">
            <h3>{{ title }}</h3>
        </div> 
        <div class="col-md-12 mb-3">
            <a href="{{request.META.HTTP_REFERER}}">Back</a>
            <h3 class="font-weight-bold">Dataset: {{ dataset }}</h3>  
            Question: {{ question }} <i>({{ category }})</i>
        </div>
        <div class="col-md-6 my-0 py-3">
            <table class="table">
                <tbody>
                    <tr>
                        <th scope="row">Train Set</th>
                        <td>{{ train_set }}</td>
                    </tr>
                    <tr>
                        <th scope="row">Test Set</th>
                        <td>{{ test_set }}</td>
                    </tr>
                    <tr>
                        <th scope="row">Features</th>
                        <td>{{ features }}</td>
                    </tr>
                </tbody>
            </table>    
        </div>
        <div class="col-md-6 my-0 py-3">
            <table class="table">
                <tbody>
                    <tr>
                        <th scope="row">Remove Stopwords</th>
                        <td>{{ remove_stopwords }}</td>
                    </tr>
                    <tr>
                        <th scope="row">N-Grams</th>
                        <td>{{ ngram }}</td>
                    </tr>
                    <tr>
                        <th scope="row">Resampling</th>
                        <td>{{ resample }}</td>
                    </tr>
                </tbody>
            </table>  
        </div>
    </div>
        {% for key, value in eval_models.items %}
            <div class="row py-3 mb-3">
                <div class="col-md-12 mb-3">
                    <h3 class="font-weight-bold">Model: {{ value.model_name }}</h3>  
                    Best Parameter: {{ value.best_params }}
                </div>
                <div class="col-md-4">
                    <h5>Confusion Matrix</h5>
                    <img class="img-fluid" src="data:image/png;base64, {{ value.conf_matrix }}"/>     
                </div>
                <div class="col-md-4">
                    <h5>Evaluation</h5>
                    <table class="table">
                        <tbody>
                            <tr>
                                <th scope="row">Test</th>
                                <td>{{ value.y_test }}</td>
                            </tr>
                            <tr>
                                <th scope="row">Predict</th>
                                <td>{{ value.y_pred }}</td>
                            </tr>
                            <tr>
                                <th scope="row">Accuracy</th>
                                <td>{{ value.evaluation.accuracy }}</td>
                            </tr>
                            <tr>
                                <th scope="row">F1 Score</th>
                                <td>{{ value.evaluation.f1_score }}</td>
                            </tr>
                            <tr>
                                <th scope="row">Recall</th>
                                <td>{{ value.evaluation.recall }}</td>
                            </tr>
                            <tr>
                                <th scope="row">Precision</th>
                                <td>{{ value.evaluation.precision }}</td>
                            </tr>
                        </tbody>
                    </table>      
                </div>
                <div class="col-md-4">
                    <h5>Cross Validation</h5>
                    <table class="table">
                        <tr>
                            {% for data in value.cros_val %}
                                <th>{{ data }}</th>
                            {% endfor %}
                        </tr>
                        {% for _, record in value.cros_val.iterrows %}
                            <tr>
                                {% for value in record %}
                                    <td>{{ value }}</td>
                                {% endfor %}
                            </tr>
                        {% endfor %}
                    </table>       
                </div>
            </div>
        {% endfor %}        
    

{% comment %}     
    <div class="row py-3">
        <div class="col-md-12 mb-3">
            <h3 class="font-weight-bold">Model: SVM</h3>  
            Best Parameter: {{ best_params }}
        </div>
        <div class="col-md-4">
            <h5>Confusion Matrix</h5>
            <img class="img-fluid" src="data:image/png;base64, {{ conf_matrix }}"/>     
        </div>
        <div class="col-md-4">
            <h5>Evaluation</h5>
            <table class="table">
                <tbody>
                    <tr>
                        <th scope="row">Test</th>
                        <td>{{ y_test }}</td>
                    </tr>
                    <tr>
                        <th scope="row">Predict</th>
                        <td>{{ y_pred }}</td>
                    </tr>
                    <tr>
                        <th scope="row">Accuracy</th>
                        <td>{{ evaluation.accuracy }}</td>
                    </tr>
                    <tr>
                        <th scope="row">F1 Score</th>
                        <td>{{ evaluation.f1_score }}</td>
                    </tr>
                    <tr>
                        <th scope="row">Recall</th>
                        <td>{{ evaluation.recall }}</td>
                    </tr>
                    <tr>
                        <th scope="row">Precision</th>
                        <td>{{ evaluation.precision }}</td>
                    </tr>
                </tbody>
            </table>      
        </div>
        <div class="col-md-4">
            <h5>Cross Validation</h5>
            <table class="table">
                <tr>
                    {% for data in cros_val %}
                        <th>{{ data }}</th>
                    {% endfor %}
                </tr>
                {% for _, record in cros_val.iterrows %}
                    <tr>
                        {% for value in record %}
                            <td>{{ value }}</td>
                        {% endfor %}
                    </tr>
                {% endfor %}
            </table>       
        </div>
    </div>
{% endcomment %}
</div>




{% endblock %}

{% block js %}
<script>
</script>
{% endblock %}
